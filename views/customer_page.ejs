<!DOCTYPE html>
<html lang="en">
<head>
    <% include template/head.ejs %>
</head>
<body>
<div class="container">
    <% include template/errors.ejs %>
    <% include template/sidebar.ejs %>
    <h1><%= pageTitle %></h1>
    <div class="main_content">
        <div class="account details">
            <h3>Name: <%=customer_data.name%></h3>

            <h4>ID: <%=customer_data.id%></h4>

            <h4>Registered on <%=customer_data.registration_date%></h4>

            <h4>Date of birth: <%=customer_data.date_of_birth%> (<%=customer_data.age%>)</h4>

            <h4 id="phone_number">Phone number: <%=customer_data.phone_number%> <input type="button" onclick="change_phone_number()" value="edit"></h4>
            <form id="edit_phone_number" style="display:none" action="/customers/edit/phone_number" method="post"><input name="phone_number" type="text" value="<%=customer_data.phone_number%>"><input type="hidden" name="customer_id" value="<%=customer_data.id%>"><button type="submit">Apply</button></form>

            <h4 id="email_address">Email address: <%=customer_data.email%> <input type="button" onclick="change_email()" value="edit"></h4>
            <form id="edit_email" style="display:none"  action="/customers/edit/email" method="post"><input name="email" type="email" value="<%=customer_data.email%>"><input type="hidden" name="customer_id" value="<%=customer_data.id%>"><button type="submit">Apply</button></form>
        </div>

        <div id="confirm_delete" style="display:none">
            <span class="btn" onclick="delete_account()">&times;</span>
            Are you sure you want to delete this account?
            <form id="delete_account" action="/customers/delete" method="post"><button type="submit"><input name="customer_id" type="hidden" value="<%=customer_data.id%>">Yes</button></form>
        </div>
        <div>
            <input id="delete" type="button" onclick="delete_account();" value="Delete account">
            <input id="new_appointment" type="button" onclick="new_appointment();" value="New Appointment">
        </div>
        <div id="appointment_form" style="display:none">
            <% include forms/appointment_form.ejs %> <br>
            <input id="cancel" type="button" onclick="new_appointment();" value="Cancel">
            </div>

    </div>
</div>

<script>
    function change_phone_number(){
        document.getElementById("phone_number").style.display = "none";
        document.getElementById("edit_phone_number").style.display = "";
    }
    function change_email(){
        document.getElementById("email_address").style.display = "none";
        document.getElementById("edit_email").style.display = "";
    }
    function delete_account(){
        if(document.getElementById("confirm_delete").style.display == "none"){
            document.getElementById("confirm_delete").style.display = "";
            document.getElementById("delete").style.display = "none";
        }else{
            document.getElementById("confirm_delete").style.display = "none";
            document.getElementById("delete").style.display = "";
        }
    }
    function new_appointment(){
        if(document.getElementById("appointment_form").style.display == "none"){
            document.getElementById("appointment_form").style.display = "";
            document.getElementById("new_appointment").style.display = "none";
        }else{
            document.getElementById("appointment_form").style.display = "none";
            document.getElementById("new_appointment").style.display = "";
        }
    }
</script>
</body>
</html>